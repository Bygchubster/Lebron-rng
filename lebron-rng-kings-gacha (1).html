<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LeBron RNG: King's Gacha</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Bungee&family=Inter:wght@400;700&display=swap');
        body {
            margin: 0;
            font-family: 'Inter', sans-serif;
            background: #0a0a0a;
            color: #ffffff;
            overflow-x: hidden;
        }
        .font-bungee {
            font-family: 'Bungee', cursive;
        }
        .text-shadow-glow {
            text-shadow: 0 0 10px rgba(249, 115, 22, 0.5), 0 0 20px rgba(249, 115, 22, 0.3);
        }
        .drop-shadow-glow {
            filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.4));
        }
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1a1a1a;
        }
        ::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #444;
        }
        
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          25% { transform: translateX(-8px) rotate(-1.5deg); }
          50% { transform: translateX(8px) rotate(1.5deg); }
          75% { transform: translateX(-4px) rotate(-0.5deg); }
        }
        .animate-shake {
          animation: shake 0.15s infinite cubic-bezier(0.36, 0.07, 0.19, 0.97);
        }

        @keyframes flash {
          0%, 100% { opacity: 0; }
          50% { opacity: 0.6; }
        }
        .animate-flash {
          animation: flash 0.3s infinite;
        }

        @keyframes god-reveal {
          0% { transform: scale(0.3) rotate(-45deg); opacity: 0; filter: brightness(10) blur(20px); }
          60% { transform: scale(1.2) rotate(10deg); opacity: 1; filter: brightness(3) blur(0px); }
          100% { transform: scale(1) rotate(0deg); opacity: 1; filter: brightness(1) blur(0px); }
        }
        .animate-god-reveal {
          animation: god-reveal 2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        @keyframes flare {
          0% { left: -150%; }
          100% { left: 150%; }
        }
        .animate-flare {
          animation: flare 1.5s infinite linear;
        }

        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }

        .scrollbar-thin {
            scrollbar-width: thin;
        }
    </style>
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom/client": "https://esm.sh/react-dom@18.2.0/client"
      }
    }
    </script>
</head>
<body>
    <div id="root"></div>
    
    <script type="module">
        import React, { useState, useEffect, useCallback, useRef, useMemo } from 'react';
        import ReactDOM from 'react-dom/client';

        // Types
        const Rarity = {
          COMMON: 'Common',
          UNCOMMON: 'Uncommon',
          RARE: 'Rare',
          EPIC: 'Epic',
          LEGENDARY: 'Legendary',
          MYTHIC: 'Mythic',
          CELESTIAL: 'Celestial',
          DIVINE: 'Divine',
          GOAT: 'GOAT'
        };

        // Constants
        const RARITY_CONFIG = {
          [Rarity.COMMON]: { color: 'text-gray-400', glow: 'shadow-gray-500/50', bg: 'bg-gray-800' },
          [Rarity.UNCOMMON]: { color: 'text-green-400', glow: 'shadow-green-500/50', bg: 'bg-green-900/40' },
          [Rarity.RARE]: { color: 'text-blue-400', glow: 'shadow-blue-500/50', bg: 'bg-blue-900/40' },
          [Rarity.EPIC]: { color: 'text-purple-400', glow: 'shadow-purple-500/50', bg: 'bg-purple-900/40' },
          [Rarity.LEGENDARY]: { color: 'text-yellow-400', glow: 'shadow-yellow-500/50', bg: 'bg-yellow-900/40' },
          [Rarity.MYTHIC]: { color: 'text-red-500', glow: 'shadow-red-500/50', bg: 'bg-red-900/40' },
          [Rarity.CELESTIAL]: { color: 'text-cyan-400', glow: 'shadow-cyan-500/50', bg: 'bg-cyan-900/40' },
          [Rarity.DIVINE]: { color: 'text-pink-400', glow: 'shadow-pink-500/50', bg: 'bg-pink-900/40' },
          [Rarity.GOAT]: { color: 'text-white font-bold tracking-widest', glow: 'shadow-white/80', bg: 'bg-gradient-to-r from-orange-500 via-white to-orange-500' },
        };

        const LEBRON_IMAGE = 'https://upload.wikimedia.org/wikipedia/commons/thumb/c/cf/LeBron_James_crop.jpg/800px-LeBron_James_crop.jpg';

        const PLAYERS = [
          { id: 'lb1', name: 'Baby LeBron', rarity: Rarity.COMMON, odds: 2, color: 'text-gray-400', glowColor: 'gray', image: LEBRON_IMAGE, luckBonus: 0, coinsBonus: 5 },
          { id: 'lb2', name: 'Draft Day LeBron', rarity: Rarity.COMMON, odds: 5, color: 'text-gray-400', glowColor: 'gray', image: LEBRON_IMAGE, luckBonus: 0.1, coinsBonus: 10 },
          { id: 'lb3', name: 'High School LeBron', rarity: Rarity.UNCOMMON, odds: 15, color: 'text-green-400', glowColor: 'green', image: LEBRON_IMAGE, luckBonus: 0.2, coinsBonus: 25 },
          { id: 'lb4', name: 'Masked LeBron', rarity: Rarity.UNCOMMON, odds: 25, color: 'text-green-400', glowColor: 'green', image: LEBRON_IMAGE, luckBonus: 0.5, coinsBonus: 50 },
          { id: 'lb5', name: 'Taco Tuesday LeBron', rarity: Rarity.RARE, odds: 50, color: 'text-blue-400', glowColor: 'blue', image: LEBRON_IMAGE, luckBonus: 1, coinsBonus: 100 },
          { id: 'lb6', name: 'Headband LeBron', rarity: Rarity.RARE, odds: 100, color: 'text-blue-400', glowColor: 'blue', image: LEBRON_IMAGE, luckBonus: 2, coinsBonus: 250 },
          { id: 'lb7', name: 'Miami Heat LeBron', rarity: Rarity.EPIC, odds: 250, color: 'text-purple-400', glowColor: 'purple', image: LEBRON_IMAGE, luckBonus: 5, coinsBonus: 500 },
          { id: 'lb8', name: 'Space Jam LeBron', rarity: Rarity.EPIC, odds: 500, color: 'text-purple-400', glowColor: 'purple', image: LEBRON_IMAGE, luckBonus: 10, coinsBonus: 1000 },
          { id: 'lb9', name: 'The Silencer LeBron', rarity: Rarity.LEGENDARY, odds: 1000, color: 'text-yellow-400', glowColor: 'yellow', image: LEBRON_IMAGE, luckBonus: 25, coinsBonus: 2500 },
          { id: 'lb10', name: 'King James', rarity: Rarity.LEGENDARY, odds: 2500, color: 'text-yellow-400', glowColor: 'yellow', image: LEBRON_IMAGE, luckBonus: 50, coinsBonus: 5000 },
          { id: 'lb11', name: 'LePookie Bear', rarity: Rarity.LEGENDARY, odds: 5000, color: 'text-yellow-400', glowColor: 'yellow', image: LEBRON_IMAGE, luckBonus: 100, coinsBonus: 10000 },
          { id: 'lb12', name: 'Skibidi LeBron', rarity: Rarity.MYTHIC, odds: 10000, color: 'text-red-500', glowColor: 'red', image: LEBRON_IMAGE, luckBonus: 250, coinsBonus: 25000 },
          { id: 'lb13', name: 'You Are My Sunshine LeBron', rarity: Rarity.MYTHIC, odds: 25000, color: 'text-red-500', glowColor: 'red', image: LEBRON_IMAGE, luckBonus: 500, coinsBonus: 50000 },
          { id: 'lb14', name: 'Mewing LeBron', rarity: Rarity.MYTHIC, odds: 50000, color: 'text-red-500', glowColor: 'red', image: LEBRON_IMAGE, luckBonus: 1000, coinsBonus: 100000 },
          { id: 'lb15', name: 'Cybernetic LeBron 3000', rarity: Rarity.CELESTIAL, odds: 100000, color: 'text-cyan-400', glowColor: 'cyan', image: LEBRON_IMAGE, luckBonus: 2500, coinsBonus: 250000 },
          { id: 'lb16', name: 'The Chosen One (Ascended)', rarity: Rarity.DIVINE, odds: 500000, color: 'text-pink-400', glowColor: 'pink', image: LEBRON_IMAGE, luckBonus: 10000, coinsBonus: 1000000 },
          { id: 'lb17', name: 'Gold LeBron (Statue)', rarity: Rarity.GOAT, odds: 1000000, color: 'text-white', glowColor: 'white', image: LEBRON_IMAGE, luckBonus: 25000, coinsBonus: 5000000 },
          { id: 'lb18', name: 'Literal Goat LeBron', rarity: Rarity.GOAT, odds: 5000000, color: 'text-white', glowColor: 'white', image: LEBRON_IMAGE, luckBonus: 100000, coinsBonus: 25000000 },
          { id: 'lb19', name: 'Universe 23 LeBron', rarity: Rarity.GOAT, odds: 10000000, color: 'text-white', glowColor: 'white', image: LEBRON_IMAGE, luckBonus: 500000, coinsBonus: 100000000 },
        ];

        const POTIONS = [
          { id: 'p1', name: 'Minor Luck Potion', type: 'luck', multiplier: 2, duration: 60000, price: 1000, color: 'from-green-400 to-green-600' },
          { id: 'p2', name: 'Major Luck Potion', type: 'luck', multiplier: 5, duration: 300000, price: 10000, color: 'from-blue-400 to-blue-600' },
          { id: 'p3', name: 'Hyper Luck Potion', type: 'luck', multiplier: 20, duration: 600000, price: 100000, color: 'from-purple-400 to-purple-600' },
          { id: 'p4', name: 'Cash Infusion', type: 'money', multiplier: 5, duration: 120000, price: 5000, color: 'from-yellow-400 to-yellow-600' },
        ];

        const LUCK_UPGRADE_COSTS = [
          100, 500, 2500, 15000, 100000, 750000, 5000000, 50000000, 1000000000
        ];

        const LUCK_PER_LEVEL = 1.0;

        const FALLBACK_IMAGE = 'https://media.gettyimages.com/id/1247065095/photo/lebron-james-of-the-los-angeles-lakers-reacts-during-a-game.jpg?s=612x612&w=gi&k=20&c=W07_U7f1Bv0yB8hC1E0yB8hC1E0yB8hC1E0yB8hC1E0=';

        // Gemini Service (mock implementation since API key not available)
        const getFlavorText = async (playerName, rarity) => {
          const flavors = {
            'LEGENDARY': ["The crowd goes wild!", "History in the making!", "Witness greatness!"],
            'MYTHIC': ["The impossible just happened!", "Reality has been bent!", "This is legendary!"],
            'CELESTIAL': ["The universe bows before you!", "Cosmic forces align!", "Transcendent pull!"],
            'DIVINE': ["Godlike luck manifested!", "The heavens have spoken!", "Divine intervention!"],
            'GOAT': ["YOU PULLED THE IMPOSSIBLE!", "THE GREATEST OF ALL TIME!", "REALITY SHATTERED!"]
          };
          const options = flavors[rarity] || ["A legendary pull!"];
          return options[Math.floor(Math.random() * options.length)];
        };

        // Components
        const Cutscene = ({ player, onComplete }) => {
          const [phase, setPhase] = useState('shaking');
          const config = RARITY_CONFIG[player.rarity];
          const onCompleteRef = useRef(onComplete);

          useEffect(() => {
            onCompleteRef.current = onComplete;
          }, [onComplete]);

          const timings = useMemo(() => {
            const odds = player.odds;
            if (odds >= 1000000) return { shaking: 4000, revealing: 8000, total: 14000 };
            if (odds >= 50000) return { shaking: 3000, revealing: 6000, total: 10000 };
            if (odds >= 10000) return { shaking: 2000, revealing: 5000, total: 8000 };
            return { shaking: 1500, revealing: 3500, total: 6000 };
          }, [player.odds]);

          useEffect(() => {
            let isMounted = true;
            
            const t1 = setTimeout(() => {
              if (isMounted) setPhase('revealing');
            }, timings.shaking);
            
            const t2 = setTimeout(() => {
              if (isMounted) setPhase('display');
            }, timings.revealing);
            
            const t3 = setTimeout(() => {
              if (isMounted) onCompleteRef.current();
            }, timings.total);

            return () => {
              isMounted = false;
              clearTimeout(t1);
              clearTimeout(t2);
              clearTimeout(t3);
            };
          }, [timings]);

          return React.createElement('div', { className: "fixed inset-0 z-[200] flex items-center justify-center bg-black overflow-hidden" },
            React.createElement('div', { className: `absolute inset-0 transition-all duration-1000 ${phase === 'shaking' ? 'bg-neutral-900 opacity-60' : `${config.bg} opacity-80`}` }),
            
            player.odds >= 50000 && React.createElement('div', { className: "absolute inset-0 pointer-events-none overflow-hidden" },
              React.createElement('div', { className: "absolute top-0 left-1/2 -translate-x-1/2 w-[200%] h-full bg-[repeating-linear-gradient(90deg,transparent,transparent_50px,rgba(255,255,255,0.05)_51px,rgba(255,255,255,0.05)_52px)] transform rotate-45 animate-pulse" })
            ),

            phase === 'shaking' && React.createElement('div', { className: "relative z-10 flex flex-col items-center animate-shake" },
              React.createElement('div', { className: "text-9xl mb-8 drop-shadow-[0_0_30px_rgba(255,255,255,0.5)]" }, 'ðŸ€'),
              React.createElement('h2', { className: "text-6xl font-bungee text-white tracking-widest text-center px-4 drop-shadow-glow" },
                player.odds >= 1000000 ? "THE COSMOS IS ALIGNING..." : "SOMETHING BIG IS COMING..."
              ),
              React.createElement('div', { className: "absolute inset-0 bg-white/30 animate-flash blur-[100px] pointer-events-none" })
            ),

            (phase === 'revealing' || phase === 'display') && React.createElement('div', { className: "relative z-20 flex flex-col items-center" },
              React.createElement('div', { className: `transition-all duration-1000 ${phase === 'revealing' ? 'animate-god-reveal' : 'scale-110'}` },
                React.createElement('div', { className: `relative group w-80 h-[28rem] rounded-3xl p-3 bg-neutral-800 shadow-[0_0_150px_rgba(255,255,255,0.3)] ${config.glow} ring-4 ring-white/10` },
                  React.createElement('div', { className: "w-full h-full rounded-2xl overflow-hidden relative flex flex-col border-8 border-white/20 bg-neutral-900" },
                    React.createElement('div', { className: "h-full w-full relative" },
                      React.createElement('img', { src: player.image, alt: player.name, className: "w-full h-full object-cover" }),
                      React.createElement('div', { className: "absolute inset-0 bg-gradient-to-t from-neutral-950 via-neutral-950/20 to-transparent" })
                    ),
                    React.createElement('div', { className: "absolute bottom-0 left-0 w-full p-6 text-center" },
                      React.createElement('p', { className: `text-lg font-bold uppercase tracking-[0.4em] mb-2 ${config.color} animate-pulse` }, player.rarity),
                      React.createElement('h2', { className: `text-4xl font-bungee leading-tight drop-shadow-[0_4px_8px_rgba(0,0,0,1)] ${config.color}` }, player.name),
                      React.createElement('p', { className: "text-white/70 text-sm mt-3 font-bold uppercase tracking-widest" }, `1 IN ${player.odds.toLocaleString()}`)
                    ),
                    React.createElement('div', { className: "absolute top-0 -left-full w-1/2 h-full bg-gradient-to-r from-transparent via-white/40 to-transparent skew-x-12 animate-flare pointer-events-none" })
                  )
                )
              ),
              phase === 'display' && React.createElement('div', { className: "mt-12 animate-in fade-in slide-in-from-bottom-8 duration-1000 text-center" },
                React.createElement('h3', { className: "text-5xl font-bungee text-yellow-500 animate-bounce drop-shadow-glow" },
                  player.odds >= 1000000 ? "UNIVERSE BROKEN!" : "NEW LEGEND UNLOCKED!"
                ),
                React.createElement('p', { className: "text-white/40 text-sm uppercase font-bold tracking-[0.5em] mt-4" }, "Preparing your locker...")
              )
            ),

            player.odds >= 10000 && React.createElement('div', { className: "absolute inset-0 pointer-events-none" },
              [...Array(player.odds >= 1000000 ? 50 : 25)].map((_, i) =>
                React.createElement('div', {
                  key: i,
                  className: `absolute rounded-full animate-ping ${player.odds >= 1000000 ? 'bg-cyan-400' : 'bg-white'}`,
                  style: {
                    top: `${Math.random() * 100}%`,
                    left: `${Math.random() * 100}%`,
                    width: `${Math.random() * 8 + 4}px`,
                    height: `${Math.random() * 8 + 4}px`,
                    animationDuration: `${Math.random() * 3 + 1}s`,
                    animationDelay: `${Math.random() * 2}s`
                  }
                })
              )
            )
          );
        };

        const EquippedDisplay = ({ equipped, incomeRate }) => {
          const handleImageError = (e) => {
            e.target.src = FALLBACK_IMAGE;
          };

          const totalLuckBonus = equipped.reduce((acc, p) => acc + p.luckBonus, 0);

          return React.createElement('div', { className: "flex gap-4 items-center overflow-x-auto pb-2 md:pb-0 scrollbar-hide" },
            React.createElement('div', { className: "flex gap-2" },
              [0, 1, 2].map((i) => {
                const player = equipped[i];
                const config = player ? RARITY_CONFIG[player.rarity] : null;

                return React.createElement('div', {
                  key: i,
                  className: `w-14 h-14 md:w-16 md:h-16 rounded-xl border-2 flex items-center justify-center overflow-hidden transition-all shadow-lg shrink-0 ${
                    player ? `border-current ${config?.color} bg-neutral-800` : 'border-dashed border-white/10 bg-white/5'
                  }`
                },
                  player ? React.createElement('img', { src: player.image, alt: player.name, className: "w-full h-full object-cover", onError: handleImageError })
                    : React.createElement('span', { className: "text-white/5 text-xl font-bungee" }, '+')
                );
              })
            ),
            React.createElement('div', { className: "flex flex-col gap-1 shrink-0" },
              React.createElement('div', { className: "bg-white/5 px-3 py-1 rounded-lg border border-white/10 min-w-[100px]" },
                React.createElement('p', { className: "text-[8px] font-bold text-neutral-400 uppercase tracking-tighter" }, "Passive Income"),
                React.createElement('p', { className: "text-sm font-bungee text-green-500 leading-none" }, `$${Math.floor(incomeRate)}/s`)
              ),
              React.createElement('div', { className: "bg-white/5 px-3 py-1 rounded-lg border border-white/10 min-w-[100px]" },
                React.createElement('p', { className: "text-[8px] font-bold text-neutral-400 uppercase tracking-tighter" }, "Equipped Luck"),
                React.createElement('p', { className: "text-sm font-bungee text-cyan-400 leading-none" }, `+${totalLuckBonus.toFixed(1)}x`)
              )
            )
          );
        };

        const RollDisplay = ({ player, isRolling, flavor }) => {
          const handleImageError = (e) => {
            const target = e.target;
            if (target.src !== FALLBACK_IMAGE) {
              target.src = FALLBACK_IMAGE;
            }
          };

          if (isRolling) {
            return React.createElement('div', { className: "h-96 flex flex-col items-center justify-center" },
              React.createElement('div', { className: "relative w-32 h-32" },
                React.createElement('div', { className: "absolute inset-0 border-8 border-orange-500/20 rounded-full" }),
                React.createElement('div', { className: "absolute inset-0 border-8 border-orange-500 border-t-transparent rounded-full animate-spin" }),
                React.createElement('div', { className: "absolute inset-0 flex items-center justify-center text-4xl animate-bounce" }, 'ðŸ€')
              ),
              React.createElement('p', { className: "mt-8 text-xl font-bungee text-white tracking-widest animate-pulse" }, "GETTING BUCKETS...")
            );
          }

          if (!player) {
            return React.createElement('div', { className: "h-96 flex items-center justify-center" },
              React.createElement('div', { className: "text-neutral-500 text-lg uppercase tracking-widest opacity-50 flex flex-col items-center gap-4" },
                React.createElement('span', { className: "text-6xl animate-pulse" }, 'ðŸ‘‘'),
                React.createElement('span', null, "Click Roll")
              )
            );
          }

          const config = RARITY_CONFIG[player.rarity];
          const isRare = player.odds >= 100;

          const getFilter = (rarity) => {
            switch (rarity) {
              case Rarity.COMMON: return 'grayscale(100%) brightness(0.8)';
              case Rarity.RARE: return 'hue-rotate(200deg) saturate(2)';
              case Rarity.EPIC: return 'hue-rotate(280deg) saturate(2.5) contrast(1.2)';
              case Rarity.LEGENDARY: return 'sepia(0.5) brightness(1.2) saturate(3) contrast(1.1)';
              case Rarity.MYTHIC: return 'hue-rotate(340deg) saturate(4) contrast(1.5)';
              case Rarity.CELESTIAL: return 'hue-rotate(180deg) brightness(1.8) saturate(1.5) contrast(1.2)';
              case Rarity.DIVINE: return 'hue-rotate(300deg) brightness(1.5) contrast(1.6) saturate(2)';
              case Rarity.GOAT: return 'brightness(1.6) contrast(1.4) saturate(2.5) drop-shadow(0 0 15px white)';
              default: return 'none';
            }
          };

          return React.createElement('div', { className: `flex flex-col items-center animate-in fade-in zoom-in duration-300 ${isRare ? 'animate-shake' : ''}` },
            React.createElement('div', { className: "text-center mb-6" },
              React.createElement('p', { className: `text-sm font-bold uppercase tracking-[0.3em] ${config.color} drop-shadow-lg` },
                player.rarity,
                React.createElement('span', { className: "ml-2 text-white/40" }, `1 in ${player.odds.toLocaleString()}`)
              )
            ),
            React.createElement('div', { className: `relative group w-72 h-96 rounded-3xl p-2 transition-all duration-700 bg-neutral-800 shadow-2xl ${config.glow}` },
              React.createElement('div', { className: "w-full h-full rounded-2xl overflow-hidden relative flex flex-col border-4 border-white/5 bg-neutral-900" },
                React.createElement('div', { className: `absolute top-0 left-0 w-full h-32 opacity-20 ${config.bg}` }),
                React.createElement('div', { className: "h-2/3 w-full relative z-10" },
                  React.createElement('div', { className: "w-full h-full bg-black/40 relative overflow-hidden" },
                    React.createElement('img', { 
                      src: player.image, 
                      alt: player.name, 
                      style: { filter: getFilter(player.rarity) },
                      className: "w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",
                      onError: handleImageError
                    }),
                    React.createElement('div', { className: "absolute inset-0 bg-gradient-to-t from-neutral-900 via-transparent to-transparent" })
                  )
                ),
                React.createElement('div', { className: "p-4 flex-1 flex flex-col justify-center text-center z-10" },
                  React.createElement('h2', { className: `text-2xl font-bungee leading-tight mb-1 drop-shadow-md ${config.color}` }, player.name),
                  React.createElement('div', { className: "h-1 w-12 bg-white/20 mx-auto rounded-full" })
                ),
                player.odds >= 1000 && React.createElement('div', { className: "absolute inset-0 pointer-events-none overflow-hidden rounded-2xl z-20" },
                  React.createElement('div', { className: "absolute top-[-50%] left-[-50%] w-[200%] h-[200%] bg-[radial-gradient(circle,rgba(255,255,255,0.15)_0%,transparent_70%)] animate-pulse" })
                )
              )
            ),
            flavor && React.createElement('p', { className: "mt-8 text-center text-neutral-300 italic max-w-sm font-medium bg-neutral-800/80 backdrop-blur px-8 py-4 rounded-2xl border border-white/10 shadow-xl animate-in slide-in-from-bottom-4 duration-500" },
              `"${flavor}"`
            )
          );
        };

        const InventoryModal = ({ inventory, equipped, onEquip, onClose }) => {
          const sortedInventory = [...inventory].sort((a, b) => b.odds - a.odds);

          return React.createElement('div', { className: "fixed inset-0 z-[100] flex items-center justify-center p-4" },
            React.createElement('div', { className: "absolute inset-0 bg-black/80 backdrop-blur-sm", onClick: onClose }),
            React.createElement('div', { className: "relative bg-neutral-900 w-full max-w-5xl max-h-[85vh] rounded-3xl border border-white/10 flex flex-col overflow-hidden shadow-2xl" },
              React.createElement('div', { className: "p-6 border-b border-white/10 flex justify-between items-center bg-white/5" },
                React.createElement('div', null,
                  React.createElement('h2', { className: "text-2xl font-bungee text-white" }, `THE LOCKER ROOM (${inventory.length})`),
                  React.createElement('p', { className: "text-[10px] text-neutral-400 uppercase tracking-widest font-bold" }, "Equip players to gain luck and money")
                ),
                React.createElement('button', { onClick: onClose, className: "text-neutral-500 hover:text-white text-2xl p-2" }, 'Ã—')
              ),
              React.createElement('div', { className: "flex-1 overflow-y-auto p-6 scrollbar-thin" },
                React.createElement('div', { className: "grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4" },
                  sortedInventory.map((player) => {
                    const config = RARITY_CONFIG[player.rarity];
                    const isEquipped = equipped.some(e => e.id === player.id);
                    
                    return React.createElement('div', {
                      key: player.id,
                      className: `relative aspect-[3/4.5] rounded-2xl border p-2 flex flex-col transition-all cursor-pointer group shrink-0 ${
                        isEquipped ? 'border-orange-500 bg-orange-500/10 scale-[1.02]' : 'border-white/5 bg-white/5 hover:border-white/20'
                      }`,
                      onClick: () => onEquip(player)
                    },
                      React.createElement('div', { className: "flex-1 rounded-xl overflow-hidden mb-2 relative" },
                        React.createElement('img', { src: player.image, alt: player.name, className: "w-full h-full object-cover" }),
                        React.createElement('div', { className: "absolute inset-0 bg-gradient-to-t from-black/60 to-transparent" })
                      ),
                      React.createElement('div', { className: "text-center" },
                        React.createElement('p', { className: `text-[8px] font-black uppercase truncate mb-1 ${config.color}` }, player.rarity),
                        React.createElement('p', { className: "text-xs font-bold text-white truncate px-1" }, player.name),
                        React.createElement('div', { className: "mt-2 flex flex-col gap-1" },
                          React.createElement('div', { className: "flex justify-between items-center text-[8px] bg-black/30 rounded px-1.5 py-0.5" },
                            React.createElement('span', { className: "text-neutral-500 font-bold" }, "LUCK"),
                            React.createElement('span', { className: "text-cyan-400 font-bold" }, `+${player.luckBonus}x`)
                          ),
                          React.createElement('div', { className: "flex justify-between items-center text-[8px] bg-black/30 rounded px-1.5 py-0.5" },
                            React.createElement('span', { className: "text-neutral-500 font-bold" }, "CASH"),
                            React.createElement('span', { className: "text-green-400 font-bold" }, `$${player.coinsBonus}/s`)
                          )
                        )
                      ),
                      isEquipped && React.createElement('div', { className: "absolute top-2 right-2 bg-orange-500 text-[8px] font-bold px-1.5 py-0.5 rounded shadow-lg animate-pulse" }, "ACTIVE")
                    );
                  })
                ),
                inventory.length === 0 && React.createElement('div', { className: "flex flex-col items-center justify-center py-24 text-neutral-500 uppercase tracking-widest" },
                  React.createElement('p', { className: "text-6xl mb-4" }, 'ðŸ‘Ÿ'),
                  React.createElement('p', null, "Locker is empty"),
                  React.createElement('p', { className: "text-xs mt-2" }, "Go out there and start rolling!")
                )
              )
            )
          );
        };

        const ShopModal = ({ coins, luckLevel, onUpgradeLuck, onBuyPotion, onClose }) => {
          const nextLuckCost = LUCK_UPGRADE_COSTS[luckLevel];
          const canAffordLuck = nextLuckCost !== undefined && coins >= nextLuckCost;

          return React.createElement('div', { className: "fixed inset-0 z-[100] flex items-center justify-center p-4" },
            React.createElement('div', { className: "absolute inset-0 bg-black/80 backdrop-blur-sm", onClick: onClose }),
            React.createElement('div', { className: "relative bg-neutral-900 w-full max-w-2xl rounded-3xl border border-white/10 flex flex-col overflow-hidden shadow-2xl" },
              React.createElement('div', { className: "p-6 border-b border-white/10 flex justify-between items-center bg-white/5" },
                React.createElement('div', null,
                  React.createElement('h2', { className: "text-2xl font-bungee text-white" }, "THE PRO SHOP"),
                  React.createElement('p', { className: "text-sm text-yellow-500 font-bold" }, `Current Funds: $${Math.floor(coins).toLocaleString()}`)
                ),
                React.createElement('button', { onClick: onClose, className: "text-neutral-500 hover:text-white text-2xl" }, 'Ã—')
              ),
              React.createElement('div', { className: "p-6 space-y-8 overflow-y-auto max-h-[70vh]" },
                React.createElement('div', { className: "bg-cyan-500/10 border border-cyan-500/20 p-4 rounded-2xl" },
                  React.createElement('h3', { className: "text-xs font-black text-cyan-400 uppercase tracking-[0.2em] mb-2" }, "Passive Luck Boosts"),
                  React.createElement('div', { className: "grid grid-cols-2 gap-4 text-[10px] font-bold uppercase" },
                    React.createElement('div', { className: "flex flex-col gap-1" },
                      React.createElement('span', { className: "text-neutral-500" }, "Collection Bonus"),
                      React.createElement('span', { className: "text-white" }, "+2% Luck per unique Player")
                    ),
                    React.createElement('div', { className: "flex flex-col gap-1" },
                      React.createElement('span', { className: "text-neutral-500" }, "Grind Bonus"),
                      React.createElement('span', { className: "text-white" }, "+0.2x Luck per 100 Rolls")
                    )
                  )
                ),
                React.createElement('div', null,
                  React.createElement('h3', { className: "text-xs font-black text-neutral-400 uppercase tracking-widest mb-4" }, "Mastery Upgrades"),
                  React.createElement('div', { className: "bg-white/5 border border-white/10 p-5 rounded-2xl flex items-center justify-between group" },
                    React.createElement('div', { className: "flex gap-4 items-center" },
                      React.createElement('div', { className: "w-14 h-14 bg-green-500/20 rounded-2xl flex items-center justify-center text-green-500 text-3xl shadow-inner shadow-black/40" }, 'ðŸ€'),
                      React.createElement('div', null,
                        React.createElement('p', { className: "font-bold text-white" }, `Luck Mastery (Lvl ${luckLevel})`),
                        React.createElement('p', { className: "text-xs text-neutral-400" }, 
                          "Next level adds ",
                          React.createElement('span', { className: "text-green-400" }, `+${LUCK_PER_LEVEL.toFixed(1)}x`),
                          " flat luck"
                        )
                      )
                    ),
                    React.createElement('button', {
                      onClick: onUpgradeLuck,
                      disabled: !canAffordLuck,
                      className: `px-6 py-4 rounded-xl font-bungee text-sm transition-all ${
                        canAffordLuck 
                          ? 'bg-orange-600 hover:bg-orange-500 text-white shadow-lg shadow-orange-900/40 hover:-translate-y-1' 
                          : 'bg-neutral-800 text-neutral-500 cursor-not-allowed opacity-50'
                      }`
                    }, nextLuckCost !== undefined ? `$${nextLuckCost.toLocaleString()}` : 'MAX LEVEL')
                  )
                ),
                React.createElement('div', null,
                  React.createElement('h3', { className: "text-xs font-black text-neutral-400 uppercase tracking-widest mb-4" }, "Performance Enhancers"),
                  React.createElement('div', { className: "grid grid-cols-1 sm:grid-cols-2 gap-4" },
                    POTIONS.map(potion =>
                      React.createElement('div', { key: potion.id, className: "bg-white/5 border border-white/10 p-4 rounded-2xl flex flex-col gap-4 group hover:border-white/20 transition-colors" },
                        React.createElement('div', { className: "flex items-center gap-3" },
                          React.createElement('div', { className: `w-12 h-12 rounded-xl bg-gradient-to-br ${potion.color} flex items-center justify-center text-2xl shadow-lg shadow-black/40 group-hover:scale-110 transition-transform` },
                            potion.type === 'luck' ? 'ðŸ”®' : 'ðŸ’°'
                          ),
                          React.createElement('div', null,
                            React.createElement('p', { className: "font-bold text-white text-sm" }, potion.name),
                            React.createElement('p', { className: "text-[10px] text-neutral-400" }, 
                              `${Math.floor(potion.duration / 60000)}m â€¢ `,
                              React.createElement('span', { className: "text-white" }, `x${potion.multiplier} Multiplier`)
                            )
                          )
                        ),
                        React.createElement('div', { className: "flex justify-between items-center mt-auto pt-2 border-t border-white/5" },
                          React.createElement('span', { className: "text-yellow-500 font-bungee text-sm" }, `$${potion.price.toLocaleString()}`),
                          React.createElement('button', {
                            onClick: () => onBuyPotion(potion),
                            disabled: coins < potion.price,
                            className: `px-5 py-2 rounded-lg text-xs font-bold transition-all ${
                              coins >= potion.price 
                                ? 'bg-white/10 hover:bg-white/20 text-white' 
                                : 'bg-neutral-800 text-neutral-500 cursor-not-allowed opacity-30'
                            }`
                          }, "Buy Now")
                        )
                      )
                    )
                  )
                )
              )
            )
          );
        };

        const SettingsModal = ({ settings, onToggle, onClose }) => {
          const raritiesWithCutscenes = [
            Rarity.LEGENDARY, Rarity.MYTHIC, Rarity.CELESTIAL, Rarity.DIVINE, Rarity.GOAT
          ];

          return React.createElement('div', { className: "fixed inset-0 z-[100] flex items-center justify-center p-4" },
            React.createElement('div', { className: "absolute inset-0 bg-black/80 backdrop-blur-sm", onClick: onClose }),
            React.createElement('div', { className: "relative bg-neutral-900 w-full max-w-md rounded-3xl border border-white/10 flex flex-col overflow-hidden shadow-2xl" },
              React.createElement('div', { className: "p-6 border-b border-white/10 flex justify-between items-center bg-white/5" },
                React.createElement('h2', { className: "text-2xl font-bungee text-white" }, "SETTINGS"),
                React.createElement('button', { onClick: onClose, className: "text-neutral-500 hover:text-white text-2xl" }, 'Ã—')
              ),
              React.createElement('div', { className: "p-6 space-y-6 overflow-y-auto max-h-[70vh]" },
                React.createElement('div', null,
                  React.createElement('h3', { className: "text-xs font-bold text-neutral-400 uppercase tracking-widest mb-4" }, "Cutscene Preferences"),
                  React.createElement('p', { className: "text-[10px] text-neutral-500 mb-4 uppercase font-bold" }, "Disable animations for specific rarities to speed up rolls"),
                  React.createElement('div', { className: "space-y-3" },
                    raritiesWithCutscenes.map(rarity => {
                      const config = RARITY_CONFIG[rarity];
                      const isEnabled = settings[rarity] ?? true;

                      return React.createElement('div', {
                        key: rarity,
                        className: "flex items-center justify-between p-3 rounded-xl bg-white/5 border border-white/5 hover:bg-white/10 transition-colors"
                      },
                        React.createElement('div', { className: "flex items-center gap-3" },
                          React.createElement('div', { className: `w-3 h-3 rounded-full ${config.bg.split(' ')[0]}` }),
                          React.createElement('span', { className: `font-bold ${config.color}` }, rarity)
                        ),
                        React.createElement('button', {
                          onClick: () => onToggle(rarity),
                          className: `relative w-12 h-6 rounded-full transition-colors duration-300 ${
                            isEnabled ? 'bg-orange-600' : 'bg-neutral-700'
                          }`
                        },
                          React.createElement('div', { className: `absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform duration-300 ${
                            isEnabled ? 'translate-x-6' : 'translate-x-0'
                          }` })
                        )
                      );
                    })
                  )
                ),
                React.createElement('div', { className: "pt-4 border-t border-white/5 text-center" },
                  React.createElement('p', { className: "text-[10px] text-neutral-600 font-bold uppercase tracking-widest" },
                    "Stats and settings are saved automatically"
                  )
                )
              )
            )
          );
        };

        // Main App
        const App = () => {
          const [stats, setStats] = useState(() => {
            const saved = localStorage.getItem('lebron-rng-stats-v5');
            if (saved) {
              const parsed = JSON.parse(saved);
              if (!parsed.cutsceneSettings) {
                parsed.cutsceneSettings = {
                  [Rarity.LEGENDARY]: true,
                  [Rarity.MYTHIC]: true,
                  [Rarity.CELESTIAL]: true,
                  [Rarity.DIVINE]: true,
                  [Rarity.GOAT]: true,
                };
              }
              return parsed;
            }
            return {
              coins: 0,
              luckMultiplier: 1,
              totalRolls: 0,
              inventory: [],
              equipped: [],
              luckUpgrades: 0,
              activePotions: { luck: 0, money: 0 },
              cutsceneSettings: {
                [Rarity.LEGENDARY]: true,
                [Rarity.MYTHIC]: true,
                [Rarity.CELESTIAL]: true,
                [Rarity.DIVINE]: true,
                [Rarity.GOAT]: true,
              }
            };
          });

          const [lastRoll, setLastRoll] = useState(null);
          const [isRolling, setIsRolling] = useState(false);
          const [hasUnclaimedRoll, setHasUnclaimedRoll] = useState(false);
          const [autoRoll, setAutoRoll] = useState(false);
          const [activeModal, setActiveModal] = useState(null);
          const [cutscenePlayer, setCutscenePlayer] = useState(null);
          const [currentFlavor, setCurrentFlavor] = useState("");

          const rollRef = useRef(isRolling);
          rollRef.current = isRolling;

          useEffect(() => {
            localStorage.setItem('lebron-rng-stats-v5', JSON.stringify(stats));
          }, [stats]);

          const getCurrentLuck = useCallback(() => {
            let totalLuck = 1 + (stats.luckUpgrades * LUCK_PER_LEVEL);
            const collectionMultiplier = 1 + (stats.inventory.length * 0.02);
            totalLuck *= collectionMultiplier;
            const rollBonus = (Math.floor(stats.totalRolls / 100) * 0.2);
            totalLuck += rollBonus;
            const equippedLuckBonus = stats.equipped.reduce((acc, p) => acc + p.luckBonus, 0);
            totalLuck += equippedLuckBonus;
            if (stats.activePotions.luck > Date.now()) {
              const potion = POTIONS.find(p => p.type === 'luck' && stats.activePotions.luck > Date.now());
              if (potion) totalLuck *= potion.multiplier;
            }
            return Math.max(1, totalLuck);
          }, [stats]);

          const passiveIncomeRate = useMemo(() => {
            const base = 5;
            const equippedCoins = stats.equipped.reduce((acc, p) => acc + p.coinsBonus, 0);
            let total = base + equippedCoins;
            if (stats.activePotions.money > Date.now()) {
              const potion = POTIONS.find(p => p.type === 'money');
              if (potion) total *= potion.multiplier;
            }
            return total;
          }, [stats.equipped, stats.activePotions.money]);

          useEffect(() => {
            const interval = setInterval(() => {
              setStats(prev => ({
                ...prev,
                coins: prev.coins + passiveIncomeRate
              }));
            }, 1000);
            return () => clearInterval(interval);
          }, [passiveIncomeRate]);

          const performRoll = useCallback(async () => {
            if (isRolling || cutscenePlayer || hasUnclaimedRoll) return;
            setIsRolling(true);
            setCurrentFlavor("");

            const luck = getCurrentLuck();
            const sortedPlayers = [...PLAYERS].sort((a, b) => b.odds - a.odds);
            
            let selected = PLAYERS[0];
            for (const player of sortedPlayers) {
              const chance = 1 / (player.odds / luck);
              if (Math.random() < chance) {
                selected = player;
                break;
              }
            }

            setTimeout(() => {
              setLastRoll(selected);
              const isRare = selected.odds >= 1000;
              const shouldShowCutscene = isRare && stats.cutsceneSettings[selected.rarity];

              if (shouldShowCutscene) {
                setCutscenePlayer(selected);
              } else {
                setHasUnclaimedRoll(true);
              }

              if (isRare) {
                getFlavorText(selected.name, selected.rarity)
                  .then(flavor => setCurrentFlavor(flavor))
                  .catch(() => setCurrentFlavor("A legendary pull!"));
              }

              setStats(prev => {
                const exists = prev.inventory.some(p => p.id === selected.id);
                const newInventory = exists ? prev.inventory : [...prev.inventory, selected];
                return {
                  ...prev,
                  totalRolls: prev.totalRolls + 1,
                  inventory: newInventory
                };
              });

              setIsRolling(false);
            }, 250);
          }, [isRolling, cutscenePlayer, hasUnclaimedRoll, getCurrentLuck, stats.cutsceneSettings]);

          const handleCutsceneComplete = useCallback(() => {
            setCutscenePlayer(null);
            setHasUnclaimedRoll(true);
          }, []);

          const claimRoll = useCallback(() => {
            setHasUnclaimedRoll(false);
          }, []);

          const toggleCutscene = useCallback((rarity) => {
            setStats(prev => ({
              ...prev,
              cutsceneSettings: {
                ...prev.cutsceneSettings,
                [rarity]: !prev.cutsceneSettings[rarity]
              }
            }));
          }, []);

          useEffect(() => {
            let timer;
            if (autoRoll && !isRolling && !cutscenePlayer && !hasUnclaimedRoll) {
              timer = setTimeout(() => {
                performRoll();
              }, 300);
            }
            return () => clearTimeout(timer);
          }, [autoRoll, isRolling, cutscenePlayer, hasUnclaimedRoll, performRoll]);

          const buyUpgrade = useCallback(() => {
            setStats(prev => {
              const cost = LUCK_UPGRADE_COSTS[prev.luckUpgrades];
              if (prev.coins >= cost && prev.luckUpgrades < LUCK_UPGRADE_COSTS.length) {
                return {
                  ...prev,
                  coins: prev.coins - cost,
                  luckUpgrades: prev.luckUpgrades + 1
                };
              }
              return prev;
            });
          }, []);

          const buyPotion = useCallback((potion) => {
            setStats(prev => {
              if (prev.coins >= potion.price) {
                return {
                  ...prev,
                  coins: prev.coins - potion.price,
                  activePotions: {
                    ...prev.activePotions,
                    [potion.type]: Date.now() + potion.duration
                  }
                };
              }
              return prev;
            });
          }, []);

          const equipPlayer = useCallback((player) => {
            setStats(prev => {
              const isEquipped = prev.equipped.some(p => p.id === player.id);
              if (isEquipped) {
                return { ...prev, equipped: prev.equipped.filter(p => p.id !== player.id) };
              }
              if (prev.equipped.length >= 3) return prev;
              return { ...prev, equipped: [...prev.equipped, player] };
            });
          }, []);

          return React.createElement('div', { className: "min-h-screen bg-neutral-950 flex flex-col items-center p-4 relative overflow-hidden" },
            cutscenePlayer && React.createElement(Cutscene, { player: cutscenePlayer, onComplete: handleCutsceneComplete }),
            
            React.createElement('div', { className: "absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-blue-500/10 rounded-full blur-[120px]" }),
            React.createElement('div', { className: "absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-orange-500/10 rounded-full blur-[120px]" }),

            React.createElement('div', { className: "w-full max-w-4xl flex justify-between items-start z-10" },
              React.createElement('div', { className: "bg-black/40 backdrop-blur-md p-4 rounded-xl border border-white/10" },
                React.createElement('h1', { className: "text-3xl font-bungee text-orange-500 tracking-tight text-shadow-glow" }, "LEBRON RNG"),
                React.createElement('div', { className: "flex flex-wrap gap-4 mt-1" },
                  React.createElement('p', { className: "text-xs text-neutral-400 uppercase font-bold tracking-widest" },
                    "Rolls: ",
                    React.createElement('span', { className: "text-white" }, stats.totalRolls.toLocaleString())
                  ),
                  React.createElement('p', { className: "text-xs text-neutral-400 uppercase font-bold tracking-widest" },
                    "Luck: ",
                    React.createElement('span', { className: "text-green-400" }, `x${getCurrentLuck().toFixed(2)}`)
                  ),
                  React.createElement('p', { className: "text-xs text-neutral-400 uppercase font-bold tracking-widest" },
                    "Collection: ",
                    React.createElement('span', { className: "text-cyan-400" }, `${stats.inventory.length}/${PLAYERS.length}`)
                  )
                )
              ),

              React.createElement('div', { className: "flex flex-col items-end gap-2" },
                React.createElement('div', { className: "bg-black/40 backdrop-blur-md p-4 rounded-xl border border-white/10 flex items-center gap-3" },
                  React.createElement('div', { className: "text-right" },
                    React.createElement('p', { className: "text-xs text-neutral-400 uppercase font-bold" }, "Balance"),
                    React.createElement('p', { className: "text-2xl font-bungee text-yellow-500" }, `$${Math.floor(stats.coins).toLocaleString()}`)
                  ),
                  React.createElement('div', { className: "w-10 h-10 bg-yellow-500 rounded-full flex items-center justify-center text-black font-bold" }, "$")
                ),
                React.createElement('div', { className: "flex gap-2" },
                  stats.activePotions.luck > Date.now() && React.createElement('div', { className: "bg-purple-900/50 text-purple-200 text-[10px] px-2 py-1 rounded-full border border-purple-500/50 animate-pulse" }, "LUCK BOOST"),
                  stats.activePotions.money > Date.now() && React.createElement('div', { className: "bg-yellow-900/50 text-yellow-200 text-[10px] px-2 py-1 rounded-full border border-yellow-500/50 animate-pulse" }, "CASH BOOST")
                )
              )
            ),

            React.createElement('div', { className: "flex-1 flex flex-col items-center justify-center w-full max-w-2xl z-10 py-8" },
              React.createElement(RollDisplay, { player: lastRoll, isRolling: isRolling, flavor: currentFlavor }),
              
              React.createElement('div', { className: "mt-8 flex flex-col items-center gap-6 w-full h-24" },
                hasUnclaimedRoll && React.createElement('button', {
                  onClick: claimRoll,
                  className: "px-12 py-4 rounded-2xl bg-green-600 hover:bg-green-500 text-white font-bungee text-xl transition-all shadow-xl shadow-green-500/30 animate-in slide-in-from-top-4 duration-300 ring-4 ring-green-400/20 active:scale-95"
                }, "CLAIM RESULTS")
              ),

              React.createElement('div', { className: "mt-4 flex flex-col items-center gap-6 w-full" },
                React.createElement('div', { className: "relative" },
                  React.createElement('button', {
                    onClick: performRoll,
                    disabled: isRolling || !!cutscenePlayer || hasUnclaimedRoll,
                    className: `w-40 h-40 rounded-full font-bungee text-2xl transition-all duration-300 shadow-2xl relative overflow-hidden ${
                      (isRolling || hasUnclaimedRoll || !!cutscenePlayer) 
                        ? 'bg-neutral-800 scale-95 cursor-not-allowed opacity-50 shadow-none' 
                        : 'bg-orange-600 hover:bg-orange-500 hover:scale-110 active:scale-90 shadow-orange-500/40'
                    }`
                  },
                    React.createElement('div', { className: "absolute inset-0 bg-gradient-to-tr from-white/20 to-transparent" }),
                    isRolling ? '...' : ((hasUnclaimedRoll || !!cutscenePlayer) ? 'LOCKED' : 'ROLL')
                  ),
                  (hasUnclaimedRoll || !!cutscenePlayer) && React.createElement('div', { className: "absolute -top-2 -right-2 bg-red-500 text-white text-[10px] font-bold px-2 py-1 rounded-full shadow-lg animate-bounce" },
                    !!cutscenePlayer ? 'REVEALING...' : 'CLAIM FIRST!'
                  )
                ),

                React.createElement('div', { className: "flex gap-4" },
                  React.createElement('button', {
                    onClick: () => setAutoRoll(!autoRoll),
                    className: `px-8 py-3 rounded-full font-bold border-2 transition-all ${
                      autoRoll ? 'bg-red-500/20 border-red-500 text-red-500' : 'bg-white/5 border-white/20 text-white hover:bg-white/10'
                    }`
                  }, autoRoll ? 'STOP AUTO' : 'AUTO ROLL')
                )
              )
            ),

            React.createElement('div', { className: "w-full max-w-5xl z-20 flex flex-col md:flex-row justify-between items-center gap-4 bg-black/60 backdrop-blur-xl p-4 rounded-2xl border border-white/10 mt-auto sticky bottom-4" },
              React.createElement(EquippedDisplay, { equipped: stats.equipped, incomeRate: passiveIncomeRate }),
              React.createElement('div', { className: "flex gap-3" },
                React.createElement('button', {
                  onClick: () => setActiveModal('inventory'),
                  className: "flex flex-col items-center px-6 py-2 rounded-xl bg-white/5 hover:bg-white/10 border border-white/10 transition-colors"
                },
                  React.createElement('span', { className: "text-xs text-neutral-400" }, "Locker"),
                  React.createElement('span', { className: "font-bold text-lg" }, stats.inventory.length)
                ),
                React.createElement('button', {
                  onClick: () => setActiveModal('shop'),
                  className: "flex flex-col items-center px-6 py-2 rounded-xl bg-white/5 hover:bg-white/10 border border-white/10 transition-colors"
                },
                  React.createElement('span', { className: "text-xs text-neutral-400" }, "Shop"),
                  React.createElement('span', { className: "font-bold text-lg" }, "ðŸª")
                ),
                React.createElement('button', {
                  onClick: () => setActiveModal('settings'),
                  className: "flex flex-col items-center px-6 py-2 rounded-xl bg-white/5 hover:bg-white/10 border border-white/10 transition-colors"
                },
                  React.createElement('span', { className: "text-xs text-neutral-400" }, "Settings"),
                  React.createElement('span', { className: "font-bold text-lg" }, "âš™ï¸")
                )
              )
            ),

            activeModal === 'inventory' && React.createElement(InventoryModal, { inventory: stats.inventory, equipped: stats.equipped, onEquip: equipPlayer, onClose: () => setActiveModal(null) }),
            activeModal === 'shop' && React.createElement(ShopModal, { coins: stats.coins, luckLevel: stats.luckUpgrades, onUpgradeLuck: buyUpgrade, onBuyPotion: buyPotion, onClose: () => setActiveModal(null) }),
            activeModal === 'settings' && React.createElement(SettingsModal, { settings: stats.cutsceneSettings, onToggle: toggleCutscene, onClose: () => setActiveModal(null) })
          );
        };

        // Render
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
</body>
</html>
